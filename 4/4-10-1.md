

# システム設定

```
参照箇所：［メインメニュー］＞［システム設定］
```

> 備考  
> ● 必要：フィールドの値は空白であってはならない。
> ● ユニーク値：該当のフィールドの値は、他のデータと重複してはいけません。

## システム設定

```
参照箇所：［メインメニュー］＞［システム設定］＞［システム設定］
```

利用者の要望を達成するため、ここではOMFLOWのシステムの調整と全体のルール設定が可能です。以下は各ブロックの説明です。

> ※ **管理者**のみシステム設定を変更する権限があります。

### 一般設定

1. **スレッドの最大数**：フォームプロセスを処理するスレッド数です。製品として当面の間、変更機能は開放しません。
2. **LOG_レベル**：過剰なLOG生成を避けるため、システムのデフォルト設定はERRORです。
3. **PIPサーバURL**：パッケージをインストール時の検索元を指定します。
4. **ホームページ**：ログイン後に表示するデフォルトページを設定します。
5. **登録ページを開**：一般ユーザーにアカウント登録ページを公開するかどうかの設定です。
6. **ログインロック機能**：機能を有効にした場合、3回連続でログインに失敗すると、5分間アカウントがロックされます。詳細設定は**/omflow/settings.py**で**LOGIN\_LOCK\_MIN**を変更し、修正後、サービスを再起動すると反映されます。
7. **管理者モード**：有効にした後、管理者アカウントのみがシステムにログインできるようになります。
8. **管理者モード広報**：「管理者モード」を有効にすると、ログインを試みた一般ユーザーなどに向けたメッセージなどがログイン画面に表示されます。

### LDAP 設定

有効にした後、LDAP接続関連の設定を入力し、関連する部門とユーザーを作成します。

#### 接続情報

| 接続情報フィールド             | フィールドの説明                                                                                        |
| ------------------------ | ------------------------------------------------------------------------------------------------- |
| server                   | Active Directory サーバーのIPアドレス / Active Directoryドメイン                                             |
| server port              | Active Directory サーバーのポート番号                                                                   |
| base dn                  | 認証範囲、例：`DC=tsom,DC=com`                                                                  |
| search dn                | 認証範囲，例：`OU=XXX,OU=XXX`                                                                   |
| bind user                | ADユーザーアカウントを接続します。例1：`AD_connect_user`、例2：`CN=AD_connect_user,CN=Users,DC=tsom,DC=com`   |
| bind password            | ADに接続するためのユーザーパスワード                                                                                |
| user search filter       | ユーザー検索基準、例：`(&#x26;(objectCategory=person)(objectClass=user))`                         |
| group search filter      | 部門検索条件                                                                                      |

> ※ 設定後、ブロックの右上にある**接続チェック**ボタンをクリックし、設定値と接続が正しいかどうかをテストしてください。

#### ユーザ項目マッピング

ユーザーを同期作成する場合、OMFLOWユーザーの属性はLDAPシステムのユーザー属性に従って入力されます。

| ユーザ項目           | LDAP項目                          |
| -------------------- | --------------------------------- |
| ユーザーアカウント(username) | 入力必須、例：sAMAccountName        |
| 名前(nick_name)      | 入力必須、例：cn                    |
| メールアドレス(email)          | 入力必須、例：mail                  |
| 社員番号             | 個人的な設定による、必須ではありません               |
| 会社名　　　　　　　 | 個人的な設定による、必須ではありません                |
| 電話番号                 | 個人的な設定による、必須ではありません                 |
| 内線番号                 | 個人的な設定による、必須ではありません                 |
| 携帯電話                 | 個人的な設定による、必須ではありません                 |

> ※ 設定完了後、ブロックの右上にある**保存して同期する**ボタンをクリックすると、システムが同期してユーザーを作成します。

#### 部門項目マッピング

部門を同期作成する場合、OMFLOWユーザーの属性はLDAPシステムのユーザー属性に従って入力されます。

| 部門項目             | LDAP項目                          |
| -------------------- | --------------------------------- |
| 部門名         　    | 入力必須                              |
| 部門番号             | 入力必須                              |

> ※ 設定完了後、ブロックの右上にある**[保存して同期する]**ボタンをクリックすると、システムが同期してユーザーを作成します。

#### 自動同期

スケジュールサイクルは週単位と月単位があり、週単位は月曜日から金曜日まで、月単位は1日から31日まで、スケジュール時間は自由に選択できます（例：土曜日02:00:00）。

#### 同期範囲

ブロックの右上にある**[保存して同期する]**ボタンをクリックすると、システムはこの設定に従って同期が行われます。
1. 部門とユーザ：LDAPシステムに従って同期範囲内の部門とユーザーを同期する。
2. ユーザのみ：LDAPシステムに従って同期範囲内のユーザーを同期する。

> ※ 過去に「部門とユーザ」を同期してから、「ユーザのみ」を同期した場合、同期されたAD部門は削除されます。

#### **[動機が有効に設定するときに正規ユーザー数を使用する]**

にチェックを入れると、ユーザーを作成する際に同期が自動的に「有効」に設定されます。 システムに追加ライセンスがない場合、「無効」のままになります。

### 個人情報の扱いに関する規約/ソフトウェアの扱いに関する規約

「個人情報の扱いに関する規約」と「ソフトウェアの扱いに関する規約」は、独自の規約に内容をカスタマイズすることが可能です。新規ユーザー登録時にこれらの規約に同意する必要があります。

### ライセンス情報

このフィールドは、所有するライセンスの内容が表示されます。 購入後ここにライセンスファイルをアップロードすると、有効になります。

### ブースターのライセンス情報

このフィールドは、所有するブースターライセンスの内容が表示されます。 ブースターをインストール後ここにライセンスファイルをアップロードすると、有効になります。

## 添付ファイルの削除

```
参照箇所：［メインメニュー］＞[システム設定]>[添付ファイルの削除]
```

ここでは、システムにアップロードされたすべてのファイルを確認できます。また、フィルタを使用して、特定の時間よりも古いファイルを見つけて削除し、ホスト上のスペースを解放することもできます。

## メインメニュー管理

```
参照箇所：［メインメニュー］＞システム設定＞メインメニュー管理
```

ここでは、左メニューの順番と位置を調整し、「フォルダ、パス」を追加できます。**フォルダ**に「フォルダ、アプリケーション、パス」を入れることは可能です。**パス**はOMFLOW内部リンクまたは外部URLを設定することができます。

> 注意事項：   
> 1. フォルダー内にアプリケーションが残っている場合、フォルダーを削除することはできません。 
> 2. すべての変更は、保存後すぐにすべてのユーザーに適用され、有効になります。

## ログイン履歴
```
参照箇所：［メインメニュー］＞[システム設定]>[ログイン履歴]
```

ここでは、OMFLOWの「ウェブページとAPI」のすべてのログイン、ログアウト、及び成功と失敗の記録が保存されています。
